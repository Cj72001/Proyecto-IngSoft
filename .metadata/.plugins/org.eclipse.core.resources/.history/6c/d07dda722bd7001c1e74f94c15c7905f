package com.uca.spring.controller;

import java.time.LocalDate;
import java.time.Period;
import java.util.ArrayList;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestParam;

import com.uca.spring.model.CINE;
import com.uca.spring.service.CINEService;
import com.uca.spring.service.PAISLOCALIDADService;
import com.uca.spring.util.Util;

@Controller
public class EstudianteController {
	

  @GetMapping("/")
  public String getForm() {
    return "login.jsp";
  }
  
  @GetMapping("/login")
  public String login() {
    return "login.jsp";
  }
  
  @PostMapping("/loginn")
  public String login(@RequestParam("CARNET") String CARNET,
		  @RequestParam("PASSWORD") String PASSWORD, 
		  ModelMap modelMap){
	  
	  if(CARNET.contentEquals("root")&&PASSWORD.contentEquals("Snowman8")){
		  //menu atributos sobre la carrera del estudiante:
		  modelMap.put("nombreEstudiante", "Omar Rafael Flores");
		  modelMap.put("anioEstudiante", "Cuarto Anio");
		  modelMap.put("numeroMateriasAprobadasEstudiante", "26");
		  modelMap.put("cumEstudiante", "8.8");
		  modelMap.put("uVEstudiante", "102");
		  modelMap.put("avanceCarreraEstudiante", "59");
		  modelMap.put("materiasDisponiblesEstudiante", "10");
		  modelMap.put("horasInternasEstudiante", "105");
		  modelMap.put("horasExternasEstudiante", "0");
		  
		  return "mainPage.jsp";
	  } 
	  else { 
		  return "login.jsp";
	  }
	
  } 
  
  @PostMapping("/actualizarContrasena")
  public String actualizarContrasena(@RequestParam("nombrePR") String nombrePR,
		  @RequestParam("carnetPR") String carnetPR, 
		  @RequestParam("passwordPR") String passwordPR,
		  ModelMap modelMap){
	  
	  if(nombrePR.contentEquals("Omar Rafael Flores")&&carnetPR.contentEquals("00038619")){
		  //Se actualizo la contrasena
		  
		  modelMap.put("nombreEstudiantePUS", "Omar Rafael Flores");
		  return "passUpdateSucess.jsp";
	  } 
	  else { 
		  modelMap.put("errorPR", "Usuario no encontrado");
		  return "passwordRecover.jsp";
	  }
	
  } 
  
  @PostMapping("/registrarEstudiante")
  public String registrarEstudiante(@RequestParam("nombreRe") String nombreRe,
		  @RequestParam("carnetRe") String carnetRe, 
		  @RequestParam("passwordRe") String passwordRe,
		  @RequestParam("passwordRe2") String passwordRe2,
		  ModelMap modelMap){ 
	  
	  if(nombreRe.isEmpty()||carnetRe.isEmpty()||passwordRe.isEmpty()||passwordRe.isEmpty()){
		  //Se actualizo la contrasena
		  
		  modelMap.put("errorRe", "No deje espacios en blanco");
		  return "register.jsp";
	  } 
	  else {
		  modelMap.put("nombreEstudianteRegistrado", nombreRe);
		  return "regUpdateSuccess.jsp";
	  }
	
  }
  
  @GetMapping("/recoveryPasword")
  public String recoveryPasword() {
    return "passwordRecover.jsp"; 
  } 
  
  @GetMapping("/register")
  public String register() {
    return "register.jsp";      
  }  
   
  
}

    
	  
   
    
  
  

